<div class = "col-xs-8 panel panel-default">

<%= form_for @order do |f| %>

<%= f.label "Customer ID: "%>  <span class="badge"><%= params[:user_id] %></span><br />
<strong>Customer: </strong><%= link_to "#{User.find(params[:user_id]).full_name} (click to view)", user_path(params[:user_id]) %><br />
<strong>Date Placed: </strong> <%= @order.id.nil? ? "N/A" : @order.created_at %><br />
<%= link_to "Edit Customer Profile", edit_user_path(params[:user_id]), class: "btn btn-primary btn-lg btn-block" %>
<br /><br />
<% unless @order.id.nil? %>
<div class = "form-group">
  <%= f.label "Placed", style: "color: green;"%>
  <%= f.radio_button :checkout_date, Date.today , {class: "form-control"}%>
  <br />
  <% if @order.user.orders.where(:checkout_date => nil).length < 0 %>
    <%= f.label "Not Placed", style: "color: red;" %>
    <%= f.radio_button :checkout_date, nil, class: "form-control" %>
  <% else %>
    <%= f.label "Not Placed", style: "color: red;" %>
    <%= f.radio_button :checkout_date, nil, {class: "form-control", disabled: true} %>
  <% end %>
</div>
<% end %>


  <div class="form-group">
    <%= f.label "Billing Address" %>
    <%= f.select :billing_id, User.find(params[:user_id]).addresses.all.collect {|c| ["#{c.id}: #{c.street_address}", c.id] }, {}, {class: "form-control"} %>
  </div>

  <div class="form-group">
    <%= f.label "Shipping Address" %>
    <%= f.select :shipping_id, User.find(params[:user_id]).addresses.all.collect {|c| ["#{c.id}: #{c.street_address}", c.id] }, {}, {class: "form-control" } %>
  </div>

  <% if @order.user.nil? || @order.user.credit_card.nil? %>
  <div class="form-group">
    <%= f.label "Billing Card" %>
    <%= f.select :credit_card_id, [], {}, {class: "form-control", disabled: true } %>
  </div>
  <% else %>
  <div class="form-group">
    <%= f.label "Billing Card" %>
    <%= f.select :credit_card_id, ["Ending in #{@order.user.credit_card.card_number[-4..-1]}"], {}, {class: "form-control" } %>
  </div>
  <% end %>


  <div class="form-group">
    <% if @order.id.nil? %>
      <%= f.submit "Create Order in Shopping Cart", class: "btn btn-primary btn-lg btn-block" %><br />
      <h2 class = "text-center" style = "color: grey;">You can add products on the next screen, once it's been created.</h2>
    <% else %>
      <%= f.submit "Update Order Information", class: "btn btn-primary btn-lg btn-block" %>
      <%= link_to "Delete Order", order_path(@order), method: :delete, data: { confirm: "Are you sure you want to delete?" }, class: "btn btn-danger btn-lg btn-block" %>
    <% end %>



  </div>
</div>
<% end %>
